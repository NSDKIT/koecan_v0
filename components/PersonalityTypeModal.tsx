'use client'

import React, { useState } from 'react';
import { X } from 'lucide-react';

interface PersonalityTypeModalProps {
  type: string;
  onClose: () => void;
}

interface PersonalityType {
  code: string;
  name: string;
  description: string;
  details: {
    basicPersonality: string;
    strengths: string;
    weaknesses: string;
    workValues: string;
    keyStrengths: string[];
    idealWorkplaces: string;
    jobHuntingAxis: string;
    summary: string;
  };
}

const personalityTypes: Record<string, PersonalityType> = {
  ENPF: {
    code: 'ENPF',
    name: 'ひらめきロケット',
    description: '新しい風を巻き起こし、まだ見ぬ景色をつくる人。未知の世界にワクワクし、最初の一歩を踏み出す勇気を持つ人です。',
    details: {
      basicPersonality: 'ENPFタイプは、新しい風を呼び込む生まれながらのチャレンジャー。「やってみなきゃわからない！」が口癖で、直感と行動力で未来を切り開くタイプです。人とのつながりを何より大切にし、出会いや対話の中からアイデアを見つけます。周囲が躊躇しているときほど「私が動こう！」と一歩を踏み出す勇気を持つ人。その姿がチームの原動力となり、自然と周りに仲間が集まっていきます。',
      strengths: 'ENPFの強みは、「動きながら考える」スピード感と柔軟さ。新しい事業、SNS運用、イベントやコラボなど、"変化が多い・人と関わる"現場で真価を発揮します。チームを巻き込みながら、アイデアをどんどん実現していく姿はまさに未来の開拓者。トレンドを読む感性も鋭く、発信力や影響力が求められる仕事と相性抜群です。',
      weaknesses: '一方で、同じ業務をコツコツ続けるルーティンワークや、上から細かく管理されるような職場ではモチベーションを保ちづらいタイプです。自分の意見を活かせない、挑戦が評価されない――そんな環境だと、持ち前の行動力が封じられてしまうことも。"自由度"と"挑戦できる余白"がENPFにとっての大切な栄養源です。',
      workValues: 'ENPFの根底には、「人と一緒に成長したい」という想いがあります。誰かの夢を応援すること、自分の挑戦で誰かを笑顔にすることに強い喜びを感じます。だからこそ、変化を恐れず挑戦できる環境が合っています。',
      keyStrengths: [
        '周囲をポジティブに巻き込む力',
        '新しいアイデアを即実行できるスピード感',
        '変化に順応しながら成果を出す柔軟性'
      ],
      idealWorkplaces: 'スタートアップやベンチャー企業、SNS・マーケティング・イベント系など発信型の現場、少数精鋭で裁量のあるチーム。自由度が高く、挑戦が歓迎される環境で一気に才能が開花します。',
      jobHuntingAxis: 'ENPFは「成長・挑戦・仲間」を軸に企業を選ぶタイプ。「自分の意見が通るか」「面白い人たちと働けるか」「新しいことに挑戦できるか」この3つが満たされるかどうかが、企業選びの決定打になります。',
      summary: 'ENPFタイプは、"誰かの背中を押す力"を持つ人。あなたの声には、未来を動かすエネルギーがあります。固定概念に縛られず、自分のワクワクを信じて行動する――それこそが、あなたらしいキャリアの築き方です。'
    }
  },
  ENPO: {
    code: 'ENPO',
    name: 'サキヨミ運転手',
    description: '理想を描き、戦略で現実へと導く人。変化を恐れず、チームをまとめながら新しい仕組みを生み出します。',
    details: {
      basicPersonality: 'ENPOは「変化を恐れない革新派」でありながら、同時に「戦略を描けるリーダー」。直感的に未来の可能性を見抜き、そこに到達するための現実的な道筋を設計するタイプです。チームの中では"ビジョンを語る指揮官"。大胆なアイデアを描くだけでなく、どう実現させるかを考え抜く冷静さも持っています。夢と現実を橋渡しできる人――それがENPOです。彼らは新しい挑戦を好みつつも、決して感情任せでは動きません。「理想を実現するには、まず仕組みを作る」という発想を持ち、チームを体系的に導く力があります。',
      strengths: 'ENPOが輝くのは、組織の"新しい柱"を作る局面。新規事業の立ち上げ、社内改革の企画推進、中長期ビジョンの設計など、「変化を計画的に形にする」ことに強みを発揮します。また、リーダーシップがありながらも、相手の意見を尊重できるバランス型。強い推進力と人間的な配慮を両立できるため、上にも下にも信頼されるタイプです。',
      weaknesses: '感情的な議論や、計画性のない思いつき行動にはストレスを感じやすい傾向があります。「ロジックがない」「方針がぶれる」と感じると、一気に集中力が落ちることも。また、自分の中で理想像が明確な分、周囲のスピード感にイライラしてしまう場面もあります。ENPOに必要なのは、"人それぞれのテンポを尊重する余裕"。',
      workValues: 'ENPOは「成長と成果」を両立させる仕事観を持っています。「理想を語るだけでは終わらせない」「やるからには成功させたい」そんな責任感と意思の強さが特徴です。計画性と革新性の両方を活かせる環境が、ENPOにとっての理想の舞台。合理的な戦略を好みながらも、人の感情を無視しないバランス型リーダーです。',
      keyStrengths: [
        '論理と直感を両立する戦略思考',
        'チームをまとめるリーダーシップ',
        '計画的にイノベーションを実現する力',
        '理想を現実に変える粘り強さ'
      ],
      idealWorkplaces: 'コンサルティングファーム・戦略企画部門、外資系・成長戦略企業、新規事業推進・組織開発・DX推進などのリーダーポジション。「考える力」と「動かす力」の両方を評価してくれる職場で、ENPOは最も輝きます。',
      jobHuntingAxis: 'ENPOの就活軸は「合理性 × 成長 × ビジョン共感」。感覚的なノリや雰囲気ではなく、理念・戦略・環境の整合性を重視します。自分のロジックを持って行動できる環境を求める傾向が強いタイプです。「考える自由があるか」「経営に近い視点を持てるか」「挑戦に意味があるか」この3つが、企業選びの決定打になります。',
      summary: 'ENPOは「革新を計画的に実現できる人」。あなたは、理想と現実の間に橋を架ける"ビジョンの設計者"です。勢いだけではなく、仕組みで未来を作る。あなたの声には、チームを動かす"戦略の説得力"が宿っています。'
    }
  },
  ENRF: {
    code: 'ENRF',
    name: 'チャンスハンター',
    description: '狙った獲物は逃さない、行動と結果で未来を切り開く人。チャンスの匂いを嗅ぎ分け、柔軟に動いて成果をつかみ取ります。',
    details: {
      basicPersonality: 'ENRFは「行動で結果をつかむ」タイプ。思い立ったらすぐ動き、現場でチャンスを見つけ、成果につなげるスピード感が最大の武器です。革新的なアイデアも実行まで持っていける実践派。「考える前に動く」が信条で、環境の変化にもすぐ対応できる柔軟さを持っています。また、人との関係を築くのも得意で、会話や雑談からビジネスチャンスを生み出す天才です。ENRFは、"結果を出すこと"に快感を覚えるタイプ。数字・反応・成果が自分のモチベーションを高める燃料になります。',
      strengths: 'ENRFの活躍フィールドは、スピードと行動が価値を生む場。営業・広報・マーケティング・イベント企画など、「人と接して即反応が返ってくる仕事」に強みを発揮します。交渉力・瞬発力・観察力がバランス良く備わっているため、「人を動かす」「場を盛り上げる」「成果を出す」のすべてができるマルチプレイヤー。常に市場の"今"を感じながら動く感覚派リーダーです。',
      weaknesses: 'スピード命のENRFにとって、計画書ばかり作って行動しない環境は退屈の極み。また、自由な発想を封じられるような"お堅い組織"にもフラストレーションを感じやすいです。「早く結果を出したいのに、動けない」状況はこのタイプのストレス源。柔軟に動ける裁量のある環境こそが、ENRFの実力を最大限に引き出します。',
      workValues: 'ENRFは「結果を出す」ことを重視しながらも、「人との信頼関係」も大切にします。「数字だけでなく、人がついてくるリーダーでありたい」という想いを持つタイプです。そのため、ただ勝つだけでなく、チーム全体で勝ちに行くことを理想とします。成果と人脈の両立――まさに「結果も人脈もハンター」。',
      keyStrengths: [
        '即断即決のスピード力',
        '状況に応じた柔軟な判断力',
        '人を巻き込む交渉力とコミュニケーション力',
        '成果にこだわり抜く実行力'
      ],
      idealWorkplaces: '営業・マーケティング・広告・PR・イベント業界、成果が見えやすい職場（数字・反応・顧客満足など）、スピード感のある企業文化、変化を歓迎する環境。ルールよりも結果で語る現場こそ、あなたのステージです。',
      jobHuntingAxis: 'ENRFは「成長できるか」「成果が正当に評価されるか」「刺激があるか」を軸に企業を選びます。競争を悪とせず、むしろ"成長のチャンス"と捉えるタイプ。「行動が早い」「実力で勝負」「チームで結果を出す」――そんな文化を持つ会社に惹かれやすい傾向があります。',
      summary: 'ENRFは「結果を出すこと」にワクワクできる人。あなたの声には、行動と熱量の説得力があります。人を動かし、数字を動かし、自分の人生を動かす――そんなエネルギーを持つ、"挑戦と成果のハンター"です。'
    }
  },
  ENRO: {
    code: 'ENRO',
    name: '冷静ざむらい',
    description: '合理と革新を武器に、成果で未来を切り開く人。冷静な判断と鋭い戦略眼で、チームを勝利へ導きます。',
    details: {
      basicPersonality: 'ENROは、「成果」と「革新」の両方を求める超合理派リーダー。理想だけで終わらせず、目標を"確実に達成する仕組み"を設計することに長けています。感情や雰囲気ではなく、データ・戦略・ロジックで物事を判断。どんな状況でも冷静に最善手を選び取る思考の持ち主です。周囲からは「頭の回転が速い」「意思決定が的確」と信頼される一方で、常に高い基準で自分とチームを律するため、ストイックな印象を持たれることも。ENROは"結果で語るタイプ"――合理性と推進力を両立させる戦略家です。',
      strengths: 'ENROの得意分野は、目標を設定し、それを実現するためのロードマップを描くこと。経営企画、事業戦略、プロジェクトマネジメント、外資系コンサル、BtoB営業など、「分析と実行の両方が求められる仕事」で力を発揮します。リスクを読み、リソースを最適化しながら成果を出す姿はまさに"戦略の猛者"。直感ではなく、根拠ある行動で結果をつくるタイプです。',
      weaknesses: 'ENROは、合理的で戦略的なタイプであるがゆえに、「感情優先」や「根拠のない思いつき」で動く環境にストレスを感じやすい傾向があります。また、長期的な視野で物事を考えるため、短期的なノリや勢いだけで動く人とのすれ違いも起こりがち。感情に振り回されず、冷静に判断できるチームメンバーとの協働がカギです。',
      workValues: 'ENROにとって「努力＝結果」。過程も大事にしつつ、成果が数字で見えることにやりがいを感じます。ただし、単なる成果主義者ではありません。「合理的な仕組みでチームが動く」ことを理想としており、感情ではなく構造で人を動かす"スマートリーダー"です。',
      keyStrengths: [
        'データと直感の両面で最適解を導ける戦略思考',
        '困難な状況でも冷静に判断できるメンタルの安定感',
        '組織を論理的に動かす推進力',
        '目標達成に向けた分析力と実行力'
      ],
      idealWorkplaces: '戦略コンサル・経営企画・外資系企業、大手企業の事業戦略／プロジェクトマネジメント部門、KPIや成果が明確な評価体制の組織。論理性が評価される環境、数字で信頼を築ける現場で本領を発揮します。',
      jobHuntingAxis: 'ENROの就活軸は「成長環境 × 成果基準 × 戦略性」。「努力がきちんと成果に反映されるか」「経営視点を持てるか」「合理的に動けるか」を重視して企業を選びます。理念よりも仕組み、感情よりも成果。"正しく努力できる環境"が、ENROにとっての理想の職場です。',
      summary: 'ENROは「理想を戦略に変える実行者」。あなたの声には、"論理の説得力"と"冷静な推進力"が宿っています。感情ではなく構造で動かし、勢いではなく戦略で勝ちに行く――それが、ENROが描く"未来を切り開く戦い方"です。'
    }
  },
  ESPF: {
    code: 'ESPF',
    name: '陽だまりコンシェルジュ',
    description: '人の笑顔が、自分のエネルギーになる人。安定の中にぬくもりを生み出し、チームを優しく包み込みます。',
    details: {
      basicPersonality: 'ESPFは、外向的で社交的、そして何より「人を大切にする」タイプです。目立ちたいわけではなく、人が安心して動ける空気をつくることに喜びを感じます。困っている人を放っておけず、誰かが落ち込んでいれば一番に声をかける。そんな自然体の思いやりが、周囲の信頼を集めます。また、柔軟性にも優れ、変化にも穏やかに対応できます。「どうすればみんなが気持ちよく働けるか」を常に考え、チームの"感情の温度管理"を担う存在です。',
      strengths: 'ESPFの得意分野は、まさに"人と人をつなぐ"仕事。人事・広報・販売・接客・教育・医療など、コミュニケーションを軸にしたサポート業務。「相手の気持ちを読み取り、安心させる」スキルは天性のものです。信頼を土台に人を動かすため、チームの潤滑油として欠かせない存在になります。',
      weaknesses: 'ESPFは、人を大切にするあまり、過度な競争や「数字だけを追う文化」に息苦しさを感じやすいタイプです。誰かが傷つく空気や、結果を急ぎすぎる現場は合いません。また、対立や衝突を避けようとして自分の意見を飲み込むこともあります。"やさしさの中に、自分の意思を持つ"ことがこのタイプの成長ポイントです。',
      workValues: 'ESPFにとって「働くこと＝人の役に立つこと」。相手が笑顔になる瞬間に、何よりのやりがいを感じます。「安心感を届ける」「関係性を深める」「場を和ませる」この3つがESPFの仕事の軸です。感謝の言葉がモチベーションの源泉であり、自分の存在が誰かの支えになっていると感じた瞬間に最高のパフォーマンスを発揮します。',
      keyStrengths: [
        '共感力と気配りの高さ',
        '変化に対応できる柔軟性',
        'チーム全体を和ませる穏やかなリーダーシップ',
        'サポートしながらも結果に導く調整力'
      ],
      idealWorkplaces: '人事・教育・接客・販売・福祉・地域密着型企業、家族的な雰囲気のある組織、チームワークを大切にする文化の職場。ESPFは「人とのつながりが実感できる環境」で最も輝きます。特に、"感謝が循環する現場"が理想的です。',
      jobHuntingAxis: 'ESPFは「人のためになるか」「安心して働けるか」「温かいチームか」を軸に企業を選びます。刺激的な環境よりも、長く信頼関係を築ける会社を重視するタイプ。「誰と働くか」「人を大事にしている会社か」この2つの観点で判断するとミスマッチが少なくなります。',
      summary: 'ESPFは、"人の安心を守る存在"。あなたの声には、チームを穏やかにまとめる温度があります。競争ではなく協調で、成果ではなく信頼で、人を支えながら組織を育てていく――それが、ESPFが描く「みんなで幸せになる働き方」です。'
    }
  },
  ESPO: {
    code: 'ESPO',
    name: '地域の番人さん',
    description: '信頼を積み重ね、組織と人を支える人。誠実さと責任感で、チームの"土台"を守り抜きます。',
    details: {
      basicPersonality: 'ESPOは、外向的でありながらも、安定と信頼を何より大切にするタイプ。「人の役に立ちたい」「組織を良くしたい」という思いが強く、縁の下で支えることでチームを輝かせることに喜びを感じます。派手さはなくとも、誠実で一貫した行動が周囲の信頼を集め、「この人がいると安心する」と言われる存在。地域や職場など、長く関わる関係性を大切に育てていくタイプです。一度任されたことは、途中で投げ出さない。ESPOは、"継続力と責任感の化身"とも言えます。',
      strengths: 'ESPOは、コツコツと信頼を積み重ねることが得意。行政・教育・地域企業・総務・管理職など、安定した組織で、調整や運営に関わるポジション。規律を守りながらチームをまとめ、現場と上層部をつなぐ"中核的存在"として活躍します。変化に慎重ではありますが、「守る」力があるからこそ、長期的な信頼を築ける人です。',
      weaknesses: 'ESPOは、変化が早すぎる環境や、ルールのない現場にストレスを感じやすいタイプ。計画性のない方向転換や、責任の所在が曖昧な組織では力を発揮しづらいです。また、「安定を守るあまり新しい挑戦を避けがち」な傾向も。"変化を受け入れる柔軟さ"を持つと、より成長できるタイプです。',
      workValues: 'ESPOは、「信頼の積み重ね」に最も価値を感じます。一つひとつの仕事を丁寧にこなし、人の期待に応えることで自分の存在価値を感じるタイプ。仕事とは、社会や仲間を守ること。だからこそ、誠実・責任・安定がESPOの行動基準です。長く続けられる環境や、人間関係の安定が何よりの安心材料になります。',
      keyStrengths: [
        '誠実で信頼される人柄',
        '安定した判断と冷静なリーダーシップ',
        '組織運営・マネジメントに強い',
        '人と人をつなぎ、関係を維持する力'
      ],
      idealWorkplaces: '地場の大手企業・官公庁・教育機関、安定した組織文化を持つ会社、社員や地域との信頼関係を重視する職場。「長く働ける」「誠実な努力が報われる」環境で最大の力を発揮します。',
      jobHuntingAxis: 'ESPOは「安定 × 信頼 × 地域貢献」を軸に企業を選びます。「腰を据えて働けるか」「人を大切にしているか」「信頼関係が築けるか」という点を最も重視するタイプです。派手な変化よりも、着実な成長。「守ることも挑戦の一つ」と考える堅実な就活観を持っています。',
      summary: 'ESPOは、「人と組織の信頼を守る柱」。あなたの声には、安心と誠実さが宿っています。目立たないところで支え続ける力こそ、組織の安定をつくるエネルギー。変化が多い時代だからこそ、あなたのような"信頼の守り人"が必要とされています。'
    }
  },
  ESRF: {
    code: 'ESRF',
    name: 'シゴデキかーちゃん',
    description: '人を大切にしながら、確実に結果を出す人。信頼を積み重ね、安心の中で成果を生み出します。',
    details: {
      basicPersonality: 'ESRFは、「人とのつながり」と「成果の両立」を目指すバランス型。チームの雰囲気を大切にしながらも、結果を出す責任感を忘れません。仕事に対して誠実で、相手の期待を超えるために努力を惜しまないタイプ。感情だけでは動かず、現実的に"今できるベスト"を選ぶ堅実な実務家です。周囲からは「信頼できる人」「安心して任せられる人」として頼られ、同僚・顧客・上司のすべてから信頼を集める存在。',
      strengths: 'ESRFは、"人との信頼関係をベースに結果を出す"タイプ。営業・販売・流通・サービス業など、数字を追いながらも、人の気持ちを汲み取る現場。顧客やチームメンバーとの信頼を重視し、長期的な関係構築を得意とします。「あなたに任せたい」と言われることが多いのが、このタイプの特徴です。誠実で安定感があり、組織に"安心して成果を託せる人"がいるだけで現場が締まります。',
      weaknesses: 'ESRFは、突然の方針変更や無理なノルマに弱い傾向があります。「信頼を大切にしたい」という思いが強い分、短期的な成果を求める文化には馴染みにくいです。また、無理をしてでも人を助けようとするあまり、自分のキャパを超えて抱え込むことも。"人を助けるために、まず自分を整える"が成長のポイントです。',
      workValues: 'ESRFにとっての仕事は「信頼の証明」。人との約束を守り、結果で応えることに強い使命感を持ちます。一方で、人の感情を置き去りにした成果主義には疑問を感じやすく、「結果も大事。でも人が大事。」という信念で働きます。数字の裏に"関係性の温度"を見ているタイプです。',
      keyStrengths: [
        '誠実なコミュニケーション能力',
        '顧客や仲間との信頼構築力',
        '安定した成果を生む継続力',
        '組織を支える現場感覚'
      ],
      idealWorkplaces: '営業・流通・接客・広報など、顧客との関わりがある現場、「人との関係づくり」が重視される職場文化、成果と人間関係の両方が評価される会社。「人を大切にする組織」＋「誠実な努力が報われる環境」で最大限に輝きます。',
      jobHuntingAxis: 'ESRFの就活軸は「信頼できる人たちと、誠実に成果を出せるか」。企業規模や派手さよりも、"誰と働くか"を重視します。「チームで頑張れる」「信頼が積み上がる」「成果をきちんと評価してもらえる」そんな職場を求める傾向が強いです。',
      summary: 'ESRFは、「人を想いながら成果を出す」実践者。あなたの声には、誠実さと安定感が宿っています。数字だけでは語れない、信頼に裏打ちされた結果を出せる人。チームにとっての"信頼の要"――それが、ESRFタイプです。'
    }
  },
  ESRO: {
    code: 'ESRO',
    name: 'どっしり親方',
    description: '信頼を積み上げ、組織を支える堅実なリーダー。誠実さと安定感で、長く続く成果を築き上げます。',
    details: {
      basicPersonality: 'ESROは、外向的で成果志向、かつ安定と秩序を重視する"守りのリーダー"。堅実・誠実・責任感の三拍子がそろい、チームから絶大な信頼を得やすいタイプです。計画的で現実的。感情よりも「筋を通す」ことを大切にし、一度決めたことは最後までやり遂げます。その姿勢が周囲に安心感を与え、自然と人がついてくるリーダーです。変化を恐れるのではなく、「安定を維持するための変化」を選べる冷静な判断力を持っています。',
      strengths: 'ESROは、組織の「仕組み」や「ルール」を整え、チームが動きやすい環境をつくることが得意。経営・管理職・製造・大手企業の本社部門、コーポレートや管理業務、品質管理、事業運営。安定した運営と確実な成果を両立できる点が強み。現場で信頼を積み重ね、長期的な成長を支えるタイプです。',
      weaknesses: 'ESROは、筋の通らない方針転換や、曖昧なリーダーシップにストレスを感じやすい傾向があります。努力と誠実さを大切にするため、「勢いだけ」「ノリ重視」の職場には馴染みにくいです。また、慎重すぎるあまり、新しいことに踏み出すのが遅れがちな面も。"変化をチャンスに変える柔軟さ"を持てると、さらに大きな信頼を得られます。',
      workValues: 'ESROにとって仕事は、"積み重ね"の連続。一瞬の成果よりも、「継続して結果を出し続ける」ことに価値を感じます。誠実さ・安定・秩序を何より重視し、その価値観のもとでチームや会社を守ることに誇りを持ちます。誰かに頼られること、期待されることが、このタイプのモチベーションです。',
      keyStrengths: [
        '計画的で堅実な行動力',
        '安定した成果を出し続ける継続力',
        '組織に秩序と信頼をもたらす誠実さ',
        'リスクを抑えつつ成長を維持できる判断力'
      ],
      idealWorkplaces: '管理部門・製造業・金融機関・行政機関、安定したビジネスモデルを持つ組織、明確なルールや評価制度が整った職場。「誠実な努力が評価される」職場で、ESROは真価を発揮します。急な変化よりも、計画的な成長を描ける環境が理想的です。',
      jobHuntingAxis: 'ESROの就活軸は「安定 × 信頼 × 実績」。会社の安定性や社会的信用度を重視し、長期的なキャリア形成を視野に入れます。「堅実にキャリアを積めるか」「社会から信頼される企業か」この2点が、ESROの企業選びにおける決め手です。',
      summary: 'ESROは「安定を強さに変える人」。あなたの声には、信頼・秩序・継続の力が宿っています。目先のスピードより、確実な積み重ね。その一歩一歩が、組織に安心と実績をもたらす。変化の時代にこそ、ESROのような"揺るぎない存在"が光ります。'
    }
  },
  INPF: {
    code: 'INPF',
    name: 'ロマン地蔵',
    description: '静かな情熱で、理想をかたちにする人。深い思考と優しいまなざしで、世界を少しずつ変えていきます。',
    details: {
      basicPersonality: 'INPFは、内向的でありながら強い信念と理想を内に秘めたタイプ。表にはあまり出さないけれど、心の中には明確な"こうありたい世界"が存在します。他人の気持ちに敏感で、深い共感力と洞察力を持っています。その一方で、自分の価値観や理想に対して非常に誠実。誰かのため、社会のために、静かに努力を重ねられる人です。人に合わせるより、"本当に意味のあることをやりたい"と考えるタイプ。外向的な熱意よりも、静かな確信と誠実な行動で周囲を動かします。',
      strengths: 'INPFは、自分の感性や思考を活かして"意味のあるもの"を生み出す仕事に向いています。デザイン・文章・研究・教育・心理・企画など、一人で深く考え、形にしていく仕事。直感力が鋭く、感性豊かな表現者でもあります。特に「人の心を動かす表現」「社会のためのアイデア」など、理想と現実をつなぐ仕事で輝きます。',
      weaknesses: 'INPFは、早さやノルマばかりを求められる環境にストレスを感じやすいタイプ。浅い会話や成果主義的な文化にも馴染みにくい傾向があります。また、自分の理想と現実のギャップに悩みやすく、「どうせ自分には無理かも」と思ってしまう瞬間も。ただし、その"繊細さ"こそが深い共感や創造性を育てる源でもあります。',
      workValues: 'INPFは、「仕事＝生き方の表現」と考えるタイプ。自分の信じることに真っ直ぐで、意義のある仕事を求めます。お金や地位よりも、人の心に届くか・社会に価値があるかを軸に判断。その誠実さが、周囲の信頼と尊敬を自然に集めます。',
      keyStrengths: [
        '深い洞察力と想像力',
        '誰かの気持ちを理解する共感力',
        '意味を見出して形にする創造性',
        '静かに努力を続ける粘り強さ'
      ],
      idealWorkplaces: 'クリエイティブ業界（デザイン・ライティング・映像など）、教育・研究・心理・NPOなど、意義を重視する組織、少人数で、個人のペースを尊重してくれるチーム。自分の感性や信念を活かせる"静かであたたかい環境"がベストです。',
      jobHuntingAxis: 'INPFの就活軸は「意味 × 誠実さ × 共感」。「この仕事は誰かのためになるか」「自分の価値観と合うか」この2つを特に重視します。"好きなことを仕事にしたい"よりも、"心から納得できることを仕事にしたい"が本音。',
      summary: 'INPFは、「静かな理想を持つ表現者」。あなたの声には、優しさと深い意味が宿っています。焦らず、無理に目立たず、自分のペースで理想を育てる。その穏やかな力が、誰かの人生に光を灯す。世界を変えるのは、いつだってあなたのような"静かな理想家"です。'
    }
  },
  INPO: {
    code: 'INPO',
    name: 'メラメラ職人さん',
    description: '理想を描き、構想で未来を設計する人。静かな分析力と洞察で、夢を現実の形にしていきます。',
    details: {
      basicPersonality: 'INPOは、思慮深く、戦略的で、理想を現実に変えることに情熱を持つ人。感情よりも構造・計画を重視します。自分の理想や価値観を明確に持ちつつも、感覚的ではなく「どう実現できるか」を常に考えています。頭の中に未来の設計図があり、それを少しずつ現実に組み上げるのが得意です。深く考えることが好きで、表には出さないけれど知的なこだわりを持っています。周囲からは「穏やかだけど芯がある」「冷静だけど確信を持っている」と言われやすいタイプです。',
      strengths: 'INPOは、「理想を形にする仕組みを考える」ことが得意。企画・研究・開発・分析・コンサルティングなど、長期的に構想を練る仕事。一見控えめですが、深く考え抜く集中力と構築力があります。感性と論理のバランスが取れており、"クリエイティブな現実主義者"です。',
      weaknesses: 'INPOは、感情や雰囲気に流される環境を苦手とします。即断即決を求められる職場や、曖昧な方針の中で動くことにストレスを感じやすいです。また、自分の中で高い理想を描きすぎて、現実とのギャップに葛藤することも。ただし、その葛藤こそが「より良い未来を構築するエネルギー」になっています。',
      workValues: 'INPOは、「意義のある未来を、論理的に形にする」ことに価値を感じます。理想だけでは満足できず、「それを実現する仕組みは？」と考えるタイプです。ロジカルでありながら、根底には強い理想主義があります。「ただ成果を出すためでなく、良い仕組みを作りたい」「社会をよりよくしたい」そんな想いがINPOを動かします。',
      keyStrengths: [
        '理想と現実をつなぐ計画力',
        '深い分析力と構想力',
        '物事の本質を見抜く洞察力',
        '静かでも確かなリーダーシップ'
      ],
      idealWorkplaces: '研究・開発・技術・コンサル・企画職、長期的なビジョンを持って動ける職場、論理性と自由度が両立している組織。"深く考える時間"を尊重してくれる環境でこそ、INPOは最高の成果を出します。',
      jobHuntingAxis: 'INPOの就活軸は「意義 × 知的刺激 × 長期ビジョン」。「自分の考えを深められるか」「理想に向かう構造があるか」この2つが重要です。勢いよりも整合性。「考え抜いた上で行動できる環境」が、INPOにとって理想的な職場です。',
      summary: 'INPOは、「理想を現実に変える設計者」。あなたの声には、静かで確かな"未来を描く力"があります。勢いで動くより、じっくり考え、確実に前に進む。あなたの一歩が、誰かの未来の道しるべになる。社会を支える"静かな戦略家"――それが、INPOという存在です。'
    }
  },
  INRF: {
    code: 'INRF',
    name: '一撃スナイパー',
    description: '思考と行動を両立し、知識を成果に変える人。冷静な分析と柔軟な発想で、結果を積み重ねていきます。',
    details: {
      basicPersonality: 'INRFは、内向的な思考派でありながら、結果にこだわる実践者タイプ。「どうすればうまくいくか」を徹底的に考え抜き、知識や理論を現実の成果へと転換できる人です。深く考え、静かに動き、確実に結果を出す。目立つことよりも"本質的な達成"を重視します。論理的で分析的ですが、冷たいわけではありません。「より良い結果を出したい」「自分の力で成長したい」――その内なる向上心が、INRFを動かしています。',
      strengths: 'INRFの強みは、「考えながら行動する」力。コンサルティング・研究開発・データ分析・マーケティングなど、分析と実行の両方が求められる仕事。一度得た知識を応用し、より良い仕組みを作るのが得意です。特に、「今あるものをより良くする」改善思考が優れています。',
      weaknesses: 'INRFは、根拠のない判断や曖昧な指示が苦手です。感情で物事が進む職場や、目的が不明確な会議にはストレスを感じやすいタイプ。また、理想を追いすぎて自分に厳しくなりがち。「完璧にやらないと意味がない」と思い詰めると、疲弊してしまうことも。"十分に良い"を受け入れる柔らかさが、より大きな成果を生む鍵です。',
      workValues: 'INRFにとって仕事とは、"知恵を結果に変える知的ゲーム"。「どうすればもっと良くできるか？」を考えるのが大好きで、成功体験よりも"仕組みの発見"に喜びを感じます。数字やデータに強く、再現性のある成果を重視。「努力が結果として見える環境」が、モチベーションを高めます。',
      keyStrengths: [
        '分析力と論理的思考',
        '改善と効率化の提案力',
        '知識を実践に落とし込む応用力',
        '安定した成果を出す継続力'
      ],
      idealWorkplaces: '研究職・マーケティング・戦略系職種、改善・分析・最適化に取り組む現場、数値や成果で評価される環境。「考えたことを試せる」「自分の工夫が成果に直結する」そんな環境で、INRFは真価を発揮します。',
      jobHuntingAxis: 'INRFの就活軸は「成長 × 再現性 × 成果」。「自分の力で結果を出せるか」「論理的に学べる環境か」を重視します。やみくもな挑戦よりも、"考え抜いて挑戦する"を選ぶタイプ。「仕組み」「知見」「結果」をキーワードに、企業を見極めていきます。',
      summary: 'INRFは、「思考を成果に変える知の探究者」。あなたの声には、理性と情熱のバランスが宿っています。焦らず、確実に、分析しながら進む。その静かな歩みが、最終的に誰よりも遠くへ行く力になる。"考えて、動いて、結果を出す"――それが、INRFの生き方です。'
    }
  },
  INRO: {
    code: 'INRO',
    name: '見通しふくろう',
    description: '論理で導き、分析で未来を動かす人。冷静な洞察と戦略で、理想を現実に変えていきます。',
    details: {
      basicPersonality: 'INROは、深い思考力と分析力でチームを導く理論型リーダー。感情や勢いではなく、事実とロジックを軸に判断します。冷静で落ち着いた印象を与えますが、その内側には確固たる理想と情熱を秘めています。「より良くするには、どうすればいいか」を常に考えており、状況を俯瞰して最善の戦略を立てられるタイプです。周囲からは「頭の回転が速い」「説明がわかりやすい」「頼れる」と言われることが多く、理論を"人に伝わる形"に翻訳できるのがこのタイプの強みです。',
      strengths: 'INROは、物事の構造を見抜き、全体を最適化するのが得意。研究開発・コンサル・経営企画・戦略立案・分析系職種、問題解決や業務改善など、論理的な整理が求められる仕事。「なぜそうなるのか」「どんなルールが働いているのか」を探ることを好みます。その分析力と再現性の高さから、"理屈で結果を作る人"と呼ばれるタイプです。',
      weaknesses: 'INROは、根拠のない議論や場当たり的な判断を苦手とします。非論理的な上司、感情的な衝突、根性論に頼る職場ではストレスを感じやすいです。また、自分の考えが明確な分、他人の意見に厳しくなりがちな一面も。"正しいより、伝わる"を意識することが、より強いリーダーシップにつながります。',
      workValues: 'INROにとって仕事とは、「論理で理想を現実に変えるプロセス」。ただ考えるだけではなく、仕組みとして動くことに意味を見出します。計画性と現実主義を併せ持ち、効率だけでなく"意義ある合理性"を求めるタイプ。「本質を理解し、戦略的に動く」という姿勢が、常に行動の根底にあります。',
      keyStrengths: [
        '問題を体系的に整理できる分析力',
        '戦略を立て、チームを導くリーダーシップ',
        'データと現実をつなぐ洞察力',
        '冷静で信頼感のある意思決定'
      ],
      idealWorkplaces: '経営企画・コンサル・研究・データ分析・R&D部門、組織全体を見渡し、最適化できるポジション、ロジカルさと独自性が評価される環境。静かに考える時間が確保され、成果が論理的に評価される職場で本領を発揮します。',
      jobHuntingAxis: 'INROの就活軸は「論理 × 自律 × 成長」。「自分の考えを深められるか」「合理的な環境で成果を出せるか」を重視します。キャリアにおいても、"専門性を磨きながら信頼を築く"道を選びやすく、長期的に自分の理論を社会実装できる企業を好む傾向があります。',
      summary: 'INROは、「理論を使って未来を設計する知性派リーダー」。あなたの声には、信頼とロジックの響きがあります。感情よりも構造、勢いよりも戦略。あなたが描くシナリオは、チームを確実に成功へ導く道筋。"考える力で世界を動かす"――それが、INROのリーダーシップです。'
    }
  },
  ISPF: {
    code: 'ISPF',
    name: '寄り添いナース',
    description: '人の想いを受け止め、優しく力に変える人。静かな思いやりで、チームに安心とぬくもりを届けます。',
    details: {
      basicPersonality: 'ISPFは、内向的で安定志向、そして深い共感力を持つサポートタイプ。目立つことを望まず、誰かを支えることで自分の存在意義を感じます。人の変化や気持ちの機微に敏感で、「相手の言葉の裏にある本音」を自然に感じ取る人。安心できる雰囲気をつくるのが得意で、チームの"心のクッション"のような存在です。静かですが、決して弱くはありません。周囲のために行動できる優しさと、相手を思いながらもブレない芯の強さを持っています。',
      strengths: 'ISPFは、人を理解し、育て、支える力に優れています。教育・人事・カウンセリング・介護・保育・販売など、「人の感情」を扱う仕事。また、サポート業務や事務など、安心感や丁寧さが求められる職場にも適性があります。"人の成長を支える裏方力"が強みです。',
      weaknesses: 'ISPFは、対立や激しい議論が続く環境を苦手とします。争いごとや感情的な言い合いに巻き込まれると、心がすり減りやすいタイプです。また、自分より他人を優先しすぎて、無理をしてしまうことも。"人を大切にすること"と"自分を大切にすること"の両立が課題になりやすいです。',
      workValues: 'ISPFは、「安心できる人間関係」と「信頼できる環境」を最も重視します。仕事の中で"誰かの役に立てている実感"が、モチベーションの源です。一人ひとりに丁寧に向き合い、チーム全体の雰囲気を整えることが得意。「みんなが気持ちよく働ける空気をつくる」――それが、ISPFの理想の働き方です。',
      keyStrengths: [
        '高い共感力と聞く力',
        '誰もが安心できる場をつくる包容力',
        '継続的に人を支えられる誠実さ',
        '優しさと芯のバランスを取れる人間力'
      ],
      idealWorkplaces: '教育・福祉・医療・人事・接客・カウンセリング業界、家族的な雰囲気・チームワーク重視の職場、安定した環境で、人の心に寄り添える現場。「人を支えること」「感謝が循環すること」が仕事の原動力になります。',
      jobHuntingAxis: 'ISPFの就活軸は「安心 × 信頼 × 人とのつながり」。「どんな人たちと働くか」「人を大切にしている会社か」この2点が最も大事です。華やかさやスピードよりも、"誠実に、心を込めて働ける環境"を重視します。',
      summary: 'ISPFは、「人の心を育む守り人」。あなたの声には、やさしさと安心感が宿っています。誰かを支えるその手は、決して小さくない。あなたがいることで、誰かが今日も頑張れる。静かな優しさで世界を温める存在です。'
    }
  },
  ISPO: {
    code: 'ISPO',
    name: '誠実マネージャー',
    description: '誠実に、静かに、組織を支える人。規律と責任感で、チームに安心と安定をもたらします。',
    details: {
      basicPersonality: 'ISPOは、内向的で安定志向、そして強い責任感を持つサポートタイプ。派手なことは好まず、きちんと筋を通し、丁寧に仕事を積み重ねます。「任された以上は最後までやり遂げたい」という思いが強く、ルールを守りながら組織を支えることに誇りを持っています。表には出ないけれど、誰よりもチームのことを考えている人。安心感と誠実さで信頼を築く"静かなリーダー"です。',
      strengths: 'ISPOは、「安定した仕組みを維持する」ことに長けています。総務・経理・事務・教育・人事・管理職など、コツコツと業務を積み上げる仕事。几帳面で丁寧、抜けが少なく、周囲に安心感を与えます。特に、「人が安心して働ける環境を整えること」が得意分野です。',
      weaknesses: 'ISPOは、秩序を大切にするため、ルールのない環境や頻繁な方向転換が続く職場にストレスを感じやすいです。また、慎重すぎるあまり新しい挑戦を後回しにする傾向も。「失敗しても学べばいい」という柔軟さが、成長のポイントになります。',
      workValues: 'ISPOにとって仕事とは、「人や組織を支える責任」。派手な成果よりも、"日々の積み重ねの中で信頼を築くこと"に価値を感じます。目の前のタスクを丁寧にこなし、チーム全体を安定させることで存在感を発揮します。',
      keyStrengths: [
        '責任感が強く、誠実な行動ができる',
        '組織を支える安定的な運営力',
        '小さなことも見逃さない丁寧さ',
        '困っている人を自然に助けるサポート力'
      ],
      idealWorkplaces: '公務員・教育・事務・経理・管理部門など、安定した企業文化を持つ組織、明確なルールや手順が整った環境。「誠実な努力が評価される職場」で最も輝きます。',
      jobHuntingAxis: 'ISPOの就活軸は「安定 × 誠実さ × 信頼」。「長く働けるか」「人間関係が穏やかか」「会社が信頼できるか」この3つを重視する傾向があります。組織の安定を守ることが、自分のやりがいにつながるタイプです。',
      summary: 'ISPOは、「誠実に、静かに、組織を支える管理人」。あなたの声には、安心と信頼のトーンがあります。派手さはなくとも、あなたがいることで組織は穏やかに回り続ける。その堅実さこそ、どんな時代にも必要な力です。'
    }
  },
  ISRF: {
    code: 'ISRF',
    name: '穏やかな影武者',
    description: '穏やかに見えて、芯は強く。冷静な戦略と粘り強さで、確実に成果をつかみ取ります。',
    details: {
      basicPersonality: 'ISRFは、内向的で現実的、そして安定の中に勝負強さを秘めたタイプ。人前で派手に動くよりも、裏で静かに準備を整え、チャンスが来た瞬間に行動します。計画的で慎重。だけど「ここぞ」という時の決断力と集中力はピカイチ。一度決めた目標には地道に努力し、確実に結果を出していくタイプです。普段は控えめでも、いざというときに頼られる"陰の実力者"。周囲からは「落ち着いているけど、仕事ができる」と評価されやすいです。',
      strengths: 'ISRFは、冷静な判断と堅実な実行力が武器。営業・事務・分析・品質管理・経理など、コツコツ積み重ね、正確に成果を出す仕事。また、「人に気を使いながらも結果を出す」バランス感覚が優れています。人に安心を与えつつ、quietly（静かに）勝つタイプ。',
      weaknesses: 'ISRFは感情的な空気や、曖昧な方針の中で動くのが苦手。急な変更や、「とりあえずやってみよう」というノリの強い文化にストレスを感じやすいです。また、慎重さが裏目に出て"挑戦のタイミングを逃す"ことも。「完璧でなくてもやってみる」勇気が、より大きな成長をもたらします。',
      workValues: 'ISRFにとって、仕事は「信頼されながら成果を出すこと」。数字だけではなく、"人に喜ばれる結果を出すこと"にやりがいを感じます。努力を見せびらかさず、静かに積み重ねて信頼を勝ち取るタイプ。派手さよりも"確実さ"、勢いよりも"誠実さ"を選びます。',
      keyStrengths: [
        '状況を見極める冷静な判断力',
        '計画的に動く堅実さ',
        'プレッシャーに強い粘りと集中力',
        '周囲との調和を保ちながら結果を出す力'
      ],
      idealWorkplaces: '安定した企業・金融・製造・営業職・品質管理など、成果が数字で見える環境、誠実さと堅実さが評価される文化。「努力が見える」「結果が評価される」職場で最も力を発揮します。',
      jobHuntingAxis: 'ISRFの就活軸は「安定 × 信頼 × 達成感」。「安心して働けるか」「努力が認められるか」「結果を出せるか」この3つを重視します。派手な挑戦よりも、"確実に成果を積み上げていくキャリア"を望むタイプです。',
      summary: 'ISRFは、「静かに勝つ職人型リーダー」。あなたの声には、冷静な自信と誠実な強さがあります。無理に目立たなくていい。静かに積み重ねた信頼こそが、あなたの最大の武器。その穏やかな強さが、チームを導き、結果を動かしていきます。'
    }
  },
  ISRO: {
    code: 'ISRO',
    name: '鉄壁キーパー',
    description: '誠実さと責任感で、組織を守り抜く人。冷静な判断と安定した行動で、信頼を積み上げていきます。',
    details: {
      basicPersonality: 'ISROは、内向的で安定志向、そして責任感の強い実務型リーダー。派手なことは好まず、きちんと筋を通し、丁寧に仕事を積み重ねます。慎重で落ち着いた性格でありながら、必要なときにはしっかり行動できる"堅実な実力者"です。感情に流されず、常に冷静に状況を見つめて判断します。仕事に対してはとても真面目で、「途中で投げ出す」という言葉がもっとも似合わないタイプ。派手なパフォーマンスよりも、確実に結果を出し、信頼を守ることを大切にします。まさに、"組織の安定を支える静かな盾"。',
      strengths: 'ISROは、「ミスを防ぐ」「秩序を保つ」など、安定を維持する仕事で力を発揮します。管理職・製造・品質保証・財務・安全管理など、手順通りに、正確さが求められる職場。計画性と誠実さが高く、周囲からの信頼も厚いタイプ。組織に一人いるだけで、全体の安心感が増します。',
      weaknesses: 'ISROは、変化のスピードが速すぎる環境や、曖昧な方針に不安を感じやすい傾向があります。安定を重んじるため、無秩序な場面では慎重になりすぎることも。ただし、守るだけでなく"小さな改善を続ける柔軟さ"を身につけることで、さらに信頼が厚くなります。',
      workValues: 'ISROにとって仕事とは、「信頼に応えること」。与えられた役割を丁寧に果たし、周囲の期待にしっかり応えようとします。一度築いた信頼を裏切らないその姿勢が、チームの安心を支える大きな柱になります。',
      keyStrengths: [
        '誠実で一貫した行動力',
        '責任感と計画性の高さ',
        'トラブル時にも冷静に対処できる判断力',
        'チーム全体を支える安定した存在感'
      ],
      idealWorkplaces: '製造・金融・行政・管理・品質管理職など。明確なルールや体制が整った企業。信頼関係を大切にする職場文化。「誠実さ」と「安定」が評価される職場で最も輝きます。',
      jobHuntingAxis: 'ISROの就活軸は 「安定 × 信頼 × 実績」。 「長く働けるか」「信頼される会社か」「実直な努力が評価されるか」 この3つを特に重視します。 短期的な刺激よりも、“堅実なキャリアを積み重ねる安心感”を大切にするタイプです。',
      summary: 'ISROは、「誠実に、組織を支え続ける守り人」。あなたの声には、落ち着きと信頼の響きがあります。派手なスピードより、着実な積み重ね。あなたがいることで、チームは安心して前に進める。それが"鉄壁の守護者"の生き方です。'
    }
  }
};

export function PersonalityTypeModal({ type, onClose }: PersonalityTypeModalProps) {
  const [selectedType, setSelectedType] = useState<string | null>(null);
  
  // タイプコードから全ての可能性を生成する関数
  const generatePossibleTypes = (code: string): string[] => {
    // タイプコードを解析（例: "E/ISRO" → ["E/I", "S", "R", "O"]）
    const parseTypeCode = (typeCode: string): string[] => {
      const result: string[] = [];
      const patterns = [
        /([EI]\/?[EI]?)/,  // E, I, または E/I
        /([NS]\/?[NS]?)/,  // N, S, または N/S
        /([PR]\/?[PR]?)/,  // P, R, または P/R
        /([FO]\/?[FO]?)/   // F, O, または F/O
      ];
      
      let remaining = typeCode;
      for (const pattern of patterns) {
        const match = remaining.match(pattern);
        if (match && match.index !== undefined) {
          result.push(match[0]);
          remaining = remaining.substring(match.index + match[0].length);
        }
      }
      
      return result;
    };
    
    const parts = parseTypeCode(code);
    
    // 各軸の可能性を配列に変換
    const possibilities = parts.map(part => {
      if (part.includes('/')) {
        return part.split('/');
      }
      return [part];
    });
    
    // 全ての組み合わせを生成（デカルト積）
    const combinations: string[] = [];
    const generateCombinations = (current: string, index: number) => {
      if (index === possibilities.length) {
        combinations.push(current);
        return;
      }
      
      for (const option of possibilities[index]) {
        generateCombinations(current + option, index + 1);
      }
    };
    
    generateCombinations('', 0);
    return combinations;
  };
  
  // スコアが0の場合、タイプコードに "/" が含まれる（例: "E/ISRO"）
  const hasAmbiguousScores = type.includes('/');
  
  const personalityType = personalityTypes[type];
  const possibleTypes = hasAmbiguousScores ? generatePossibleTypes(type) : [];
  
  // 選択されたタイプの詳細を表示
  const displayType = selectedType || type;
  const displayPersonalityType = personalityTypes[displayType];

  // スコアが0で複数の可能性がある場合のタイプ選択画面
  if (hasAmbiguousScores && possibleTypes.length > 0 && !selectedType) {
    return (
      <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
        <div className="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto my-8">
          <div className="sticky top-0 bg-gradient-to-r from-purple-600 to-purple-500 text-white p-6 rounded-t-2xl z-10">
            <div className="flex justify-between items-start">
              <div>
                <div className="flex items-center mb-2">
                  <span className="text-3xl font-bold mr-3">{type}</span>
                </div>
                <p className="text-purple-50 text-sm">中間的なスコアのため、複数の可能性があります</p>
              </div>
              <button
                onClick={onClose}
                className="text-white hover:text-purple-100 transition-colors"
              >
                <X className="w-6 h-6" />
              </button>
            </div>
          </div>
          
          <div className="p-6">
            <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
              <p className="text-yellow-800 font-semibold mb-2">中間的なスコアについて</p>
              <p className="text-yellow-700 text-sm">
                一部の軸でスコアが0（中間）のため、以下の{possibleTypes.length}つのタイプの可能性があります。
                各タイプをクリックして詳細を確認してください。
              </p>
            </div>
            
            <section>
              <h3 className="text-xl font-bold text-gray-800 mb-4">可能性のあるタイプ</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {possibleTypes.map((possibleType) => {
                  const typeInfo = personalityTypes[possibleType];
                  if (!typeInfo) return null;
                  
                  return (
                    <button
                      key={possibleType}
                      onClick={() => setSelectedType(possibleType)}
                      className="bg-white border-2 border-purple-200 rounded-xl p-6 hover:border-purple-500 hover:shadow-lg transition-all text-left"
                    >
                      <div className="flex items-center mb-3">
                        <span className="text-2xl font-bold text-purple-600 mr-3">{typeInfo.code}</span>
                        <span className="text-lg font-semibold text-gray-800">{typeInfo.name}</span>
                      </div>
                      <p className="text-gray-600 text-sm line-clamp-2">{typeInfo.description}</p>
                      <div className="mt-4 text-purple-600 text-sm font-medium">
                        詳細を見る →
                      </div>
                    </button>
                  );
                })}
              </div>
            </section>
          </div>
          
          <div className="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-2xl">
            <button
              onClick={onClose}
              className="w-full bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
            >
              閉じる
            </button>
          </div>
        </div>
      </div>
    );
  }

  // エラー: タイプが見つからない場合
  if (!displayPersonalityType) {
    return (
      <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div className="bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-2xl font-bold text-gray-800">エラー</h2>
            <button
              onClick={onClose}
              className="text-gray-500 hover:text-gray-700 transition-colors"
            >
              <X className="w-6 h-6" />
            </button>
          </div>
          <p className="text-gray-600">パーソナリティタイプ「{displayType}」が見つかりませんでした。</p>
        </div>
      </div>
    );
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
      <div className="bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto my-8">
        {/* Header */}
        <div className="sticky top-0 bg-gradient-to-r from-purple-600 to-purple-500 text-white p-6 rounded-t-2xl z-10">
          <div className="flex justify-between items-start">
            <div>
              <div className="flex items-center mb-2">
                <span className="text-3xl font-bold mr-3">{displayPersonalityType.code}</span>
                <span className="text-xl font-semibold">{displayPersonalityType.name}</span>
              </div>
              <p className="text-purple-50 text-sm">{displayPersonalityType.description}</p>
            </div>
            <div className="flex items-center space-x-2">
              {selectedType && (
                <button
                  onClick={() => setSelectedType(null)}
                  className="text-white hover:text-purple-100 transition-colors text-sm px-3 py-1 bg-purple-700 rounded-lg"
                >
                  戻る
                </button>
              )}
              <button
                onClick={onClose}
                className="text-white hover:text-purple-100 transition-colors"
              >
                <X className="w-6 h-6" />
              </button>
            </div>
          </div>
        </div>

        {/* Content */}
        <div className="p-6 space-y-6">
          {/* 基本性格 */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              基本性格
            </h3>
            <p className="text-gray-700 leading-relaxed">{displayPersonalityType.details.basicPersonality}</p>
          </section>

          {/* 強み */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              強み
            </h3>
            <p className="text-gray-700 leading-relaxed mb-4">{displayPersonalityType.details.strengths}</p>
            <div className="bg-purple-50 rounded-lg p-4">
              <h4 className="font-semibold text-gray-800 mb-2">主な強み</h4>
              <ul className="space-y-2">
                {displayPersonalityType.details.keyStrengths.map((strength, index) => (
                  <li key={index} className="flex items-start">
                    <span className="text-purple-600 mr-2">✓</span>
                    <span className="text-gray-700">{strength}</span>
                  </li>
                ))}
              </ul>
            </div>
          </section>

          {/* 弱み */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              弱み・注意点
            </h3>
            <p className="text-gray-700 leading-relaxed">{displayPersonalityType.details.weaknesses}</p>
          </section>

          {/* 仕事観 */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              仕事観
            </h3>
            <p className="text-gray-700 leading-relaxed">{displayPersonalityType.details.workValues}</p>
          </section>

          {/* 理想の職場 */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              理想の職場
            </h3>
            <p className="text-gray-700 leading-relaxed">{displayPersonalityType.details.idealWorkplaces}</p>
          </section>

          {/* 就活軸 */}
          <section>
            <h3 className="text-xl font-bold text-gray-800 mb-3 border-b-2 border-purple-200 pb-2">
              就活軸
            </h3>
            <p className="text-gray-700 leading-relaxed">{displayPersonalityType.details.jobHuntingAxis}</p>
          </section>

          {/* まとめ */}
          <section className="bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-6 border-l-4 border-purple-500">
            <h3 className="text-xl font-bold text-gray-800 mb-3">まとめ</h3>
            <p className="text-gray-800 leading-relaxed font-medium">{displayPersonalityType.details.summary}</p>
          </section>
        </div>

        {/* Footer */}
        <div className="sticky bottom-0 bg-white border-t border-gray-200 p-4 rounded-b-2xl">
          <button
            onClick={onClose}
            className="w-full bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
          >
            閉じる
          </button>
        </div>
      </div>
    </div>
  );
}